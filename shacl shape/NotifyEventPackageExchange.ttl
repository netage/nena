@prefix nena:   <urn:oasis:shacl:shape:> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix cap: <urn:oasis:names:tc:emergency:cap:1.1:>.
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix nena-ne: <urn:nena:xml:ns:NotifyEventExchange:2.0:>.
@prefix edxl-cap: <http://release.niem.gov/niem/adapters/edxl-cap/4.0/> .

nena:NotifyEventPackageShape
	a sh:NodeShape ;
	sh:targetClass nena-ne:NotifyEventPackage ;
	sh:property [             
		sh:path nena-ne:notifyEventNextHopUri;           
		sh:minCount 1 ;
		sh:maxCount 1 ;
		sh:datatype xsd:anyURI;
		sh:name "NotifyEventNextHopUri" ;
		sh:description "URI of downstream entity occurring in a Termination-Policy" ;
	] ;
	sh:property [             
		sh:path nena-ne:notifyEventCodes;           
		sh:minCount 1 ;
		sh:datatype xsd:string;
		sh:name "NotifyEventEventCodes" ;
		sh:description "Enumeration of event codes.  May occur more than once" ;
	] ;
	sh:property [             
		sh:path nena-ne:notifyBodies;           
		sh:minCount 1 ;
		sh:maxCount 1;
		sh:name "NotifyBodies" ;
		sh:node nena:NotifyBodyShape ;
	] .
	
nena:NotifyBodiesShape
	a sh:NodeShape ;
	sh:property [             
		sh:path nena-ne:notifyBodiesEsrpCondition;           
		sh:minCount 1 ;
		sh:maxCount 1 ;
		sh:name "NotifyBodiesEsrpCondition" ;
		sh:description "Rule and values that triggered the event." ;
	] ;
	sh:property [             
		sh:path edxl-cap:alertAdapter;           
		sh:minCount 1 ;
		sh:maxCount 1;
		sh:name "AlertAdapater" ;
		sh:node nena:AlertAdapaterShape ;
	] .

nena:AlertAdapaterShape
	a sh:NodeShape ;
	sh:property [             
		sh:path cap:alert;           
		sh:minCount 0;
		sh:name "Alerts" ;
		sh:description "CAP Alert Message (version 1.1)" ;
		sh:node nena:AlertShape ;
	] .
	
nena:AlertShape
	a sh:NodeShape ;
	sh:property [             
		sh:path cap:identifier;           
		sh:minCount 1;
		sh:maxCount 1;
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:sender;           
		sh:minCount 1;
		sh:maxCount 1;
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:sent;           
		sh:minCount 1;
		sh:maxCount 1;
		sh:datatype xsd:dateTime;
	] ;
	sh:property [             
		sh:path cap:status;           
		sh:minCount 1;
		sh:maxCount 1;
		sh:datatype xsd:string;
		sh:in ("Actual" "Exercise" "System" "Test" "Draft");
	] ;
	sh:property [             
		sh:path cap:msgType;           
		sh:minCount 1;
		sh:maxCount 1;
		sh:datatype xsd:string;
		sh:in ("Alert" "Update" "Cancel" "Ack" "Error");
	] ;
	sh:property [             
		sh:path cap:source;           
		sh:maxCount 1;
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:scope;           
		sh:minCount 1;
		sh:maxCount 1;
		sh:datatype xsd:string;
		sh:in ("Restricted" "Public" "Private");
	] ;
	sh:property [             
		sh:path cap:restriction;           
		sh:maxCount 1;
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:addresses;           
		sh:maxCount 1;
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:code;           
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:note;    
		sh:maxCount 1;		
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:references;    
		sh:maxCount 1;		
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:incidents;    
		sh:maxCount 1;		
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:info; 
		sh:node nena:InfoShape;
	] .
	
nena:InfoShape
	a sh:NodeShape ;
	sh:property [             
		sh:path cap:identifier;           
		sh:minCount 1;
		sh:maxCount 1;
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:language;           
		sh:maxCount 1;
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:category;           
		sh:minCount 1;
		sh:datatype xsd:string;
		sh:in ("Geo" "Met" "Safety" "Security" "Rescue" "Fire" "Health" "Env" "Transport" "Infra" "CBRNE" "Other");
	] ;
	sh:property [             
		sh:path cap:event;    
		sh:maxCount 1;
		sh:minCount 1;		
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:category;           
		sh:datatype xsd:string;
		sh:minCount 1;	
		sh:in ("Shelter" "Evacuate" "Prepare" "Execute" "Monitor" "Assess" "None");
	] ;
	sh:property [             
		sh:path cap:urgency;    
		sh:maxCount 1;
		sh:minCount 1;			
		sh:datatype xsd:string;
		sh:in ("Immediate" "Expected" "Future" "Past" "Unknown");
	] ;
	sh:property [             
		sh:path cap:severity;           
		sh:datatype xsd:string;
		sh:maxCount 1;
		sh:minCount 1;	
		sh:in ("Extreme" "Severe" "Moderate" "Moderate" "Minor" "Unknown");
	] ;
	sh:property [             
		sh:path cap:certainty;           
		sh:datatype xsd:string;
		sh:maxCount 1;
		sh:minCount 1;	
		sh:in ("Observed" "Likely" "Possible" "Unlikely" "Unknown");
	] ;
	sh:property [             
		sh:path cap:audience;    
		sh:maxCount 1;	
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:eventCode;
		sh:node nena:valueShape;
	] ;
	sh:property [             
		sh:path cap:effective;    
		sh:maxCount 1;	
		sh:datatype xsd:dateTime;
	] ;
	sh:property [             
		sh:path cap:onset;    
		sh:maxCount 1;	
		sh:datatype xsd:dateTime;
	] ;
	sh:property [             
		sh:path cap:expires;    
		sh:maxCount 1;	
		sh:datatype xsd:dateTime;
	] ;
	sh:property [             
		sh:path cap:senderName;    
		sh:maxCount 1;	
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:headline;    
		sh:maxCount 1;	
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:description;    
		sh:maxCount 1;	
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:instruction;    
		sh:maxCount 1;	
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:web;    
		sh:maxCount 1;	
		sh:datatype xsd:anyURI;
	] ;
	sh:property [             
		sh:path cap:contact;    
		sh:maxCount 1;	
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:parameter;
		sh:node nena:valueShape;
	];
	sh:property [             
		sh:path cap:resource;
		sh:node nena:resourceShape;
	] ;
	sh:property [             
		sh:path cap:area;
		sh:node nena:areaShape;
	] .
	
nena:resourceShape
	a sh:NodeShape ;
	sh:property [
		sh:path cap:resourceDesc;
		sh:minCount 1;
		sh:maxCount 1;	
		sh:datatype xsd:string;
	] ;
	sh:property [
		sh:path cap:mimeType;
		sh:maxCount 1;	
		sh:datatype xsd:string;
	] ;
	sh:property [
		sh:path cap:size;
		sh:maxCount 1;	
		sh:datatype xsd:integer;
	] ;
	sh:property [
		sh:path cap:uri;
		sh:maxCount 1;	
		sh:datatype xsd:anyURI;
	] ;
	sh:property [
		sh:path cap:derefUri;
		sh:maxCount 1;	
		sh:datatype xsd:string;
	] ;
	sh:property [
		sh:path cap:digest;
		sh:maxCount 1;	
		sh:datatype xsd:string;
	] .
	
nena:areaShape
	a sh:NodeShape ;
	sh:property [             
		sh:path cap:areaDesc;
		sh:minCount 1;
		sh:maxCount 1;
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:polygon;           
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:circle;           
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:circle;           
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:circle;           
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:altitude;
		sh:maxCount 1;		
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:ceiling;
		sh:maxCount 1;		
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:geocode;
		sh:node nena:valueShape;
	] .

nena:valueShape
	a sh:NodeShape ;
	sh:property [             
		sh:path cap:valueName;           
		sh:datatype xsd:string;
	] ;
	sh:property [             
		sh:path cap:value;           
		sh:datatype xsd:string;
	] .
	



